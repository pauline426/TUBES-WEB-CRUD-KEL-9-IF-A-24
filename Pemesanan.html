<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keranjang Pesanan - Warung Nasi Serba Serbi</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: #fff7ef;
            color: #333;
        }

        /* NAVBAR */
        nav {
            width: 100%;
            padding: 20px 50px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: transparent;
        }
        
        .logo-area {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-left: 20px;
        }
        
        .logo {
            height: 50px;
            width: 50px;
            border-radius: 50%;
            background: #fff;
            padding: 5px;
            box-shadow: 0 0 20px rgba(255, 166, 0, 0.6),
                0 0 40px rgba(255, 166, 0, 0.3);
        }
        
        .brand-text {
            font-size: 1.1rem;
            font-weight: 700;
            color: #f27202;
            line-height: 1.3;
        }

        .back-btn {
            padding: 10px 25px;
            background: #ff7a00;
            color: white;
            text-decoration: none;
            border-radius: 30px;
            font-weight: bold;
            transition: 0.3s;
        }

        .back-btn:hover {
            background: #ff9a2a;
            transform: scale(1.05);
        }

        /* NOTIFICATION STYLES */
        .notification-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .notification-overlay.active {
            display: flex;
        }

        .notification {
            background: white;
            border-radius: 15px;
            padding: 30px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            animation: slideUp 0.3s ease;
        }

        .notification-icon {
            font-size: 3rem;
            color: #ff7a00;
            margin-bottom: 15px;
        }

        .notification.success .notification-icon {
            color: #4CAF50;
        }

        .notification.warning .notification-icon {
            color: #ff9800;
        }

        .notification.error .notification-icon {
            color: #f44336;
        }

        .notification h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.4rem;
        }

        .notification p {
            color: #666;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .notification-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .notification-btn {
            padding: 10px 25px;
            border: none;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            min-width: 100px;
        }

        .notification-btn.confirm {
            background: #4CAF50;
            color: white;
        }

        .notification-btn.confirm:hover {
            background: #45a049;
        }

        .notification-btn.cancel {
            background: #f5f5f5;
            color: #666;
        }

        .notification-btn.cancel:hover {
            background: #e0e0e0;
        }

        .notification-btn.ok {
            background: #2196F3;
            color: white;
        }

        .notification-btn.ok:hover {
            background: #0b7dda;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* MAIN CONTENT CONTAINER */
        .container {
            max-width: 1200px;
            margin: 0 auto 40px;
            padding: 0 20px;
        }

        /* JUDUL HALAMAN - DIPINDAHKAN KE ATAS ACTION TOOLBAR */
        .page-header {
            margin-bottom: 30px;
            text-align: center;
        }

        .page-title {
            color: #7a3e00;
            font-size: 2.5rem;
            margin-bottom: 20px;
            position: relative;
        }

        /* ACTION TOOLBAR - SEKARANG DIBAWAH JUDUL */
        .action-toolbar {
            background: white;
            border-radius: 20px;
            padding: 20px 30px;
            margin: 20px 0 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
            display: none; /* Awalnya disembunyikan */
        }

        .action-buttons {
            display: flex;
            gap: 15px;
        }

        .action-btn {
            padding: 10px 25px;
            border: none;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .edit-btn {
            background: #4CAF50;
            color: white;
        }

        .edit-btn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }

        .delete-btn {
            background: #ff4444;
            color: white;
        }

        .delete-btn:hover {
            background: #ff3333;
            transform: translateY(-2px);
        }

        .add-btn {
            background: #2196F3;
            color: white;
        }

        .add-btn:hover {
            background: #0b7dda;
            transform: translateY(-2px);
        }

        .select-all {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: bold;
            color: #7a3e00;
        }

        .select-all input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        /* KERANJANG SECTION */
        .cart-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
            margin-bottom: 50px;
        }

        .cart-items {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .cart-header {
            display: grid;
            grid-template-columns: 0.5fr 2.5fr 1.2fr 1.3fr 1fr;
            padding: 15px 0;
            border-bottom: 2px solid #eee;
            font-weight: bold;
            color: #7a3e00;
            text-align: center;
        }

        .cart-header div:nth-child(2) {
            text-align: left;
            padding-left: 25px;
        }

        .cart-item {
            display: grid;
            grid-template-columns: 0.5fr 2.5fr 1.2fr 1.3fr 1fr;
            align-items: center;
            padding: 25px 0;
            border-bottom: 1px solid #eee;
            transition: all 0.3s ease;
        }

        .cart-item.selected {
            background: #fff8e1;
            border-left: 4px solid #ff7a00;
            border-radius: 10px;
            margin: 5px 0;
            padding: 25px 20px;
        }

        .item-checkbox {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .item-checkbox input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .item-info {
            display: flex;
            align-items: center;
            gap: 20px;
            padding-left: 25px;
        }

        .item-img {
            width: 80px;
            height: 80px;
            border-radius: 10px;
            object-fit: cover;
            border: 2px solid #ff7a00;
        }

        .item-details h4 {
            font-size: 1.2rem;
            color: #333;
            margin-bottom: 5px;
        }

        .item-details .price {
            color: #ff7a00;
            font-weight: bold;
            font-size: 0.9rem;
        }

        .item-price {
            text-align: center;
            font-weight: 600;
            color: #7a3e00;
            font-size: 1.1rem;
            padding: 0 15px;
        }

        .qty-control {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            padding: 0 10px;
        }

        .qty-control button {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 50%;
            background: #ff7a00;
            color: white;
            font-size: 1.4rem;
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .qty-control button:hover {
            background: #ff9a2a;
            transform: scale(1.1);
        }

        .qty {
            min-width: 40px;
            text-align: center;
            font-weight: bold;
            font-size: 1.2rem;
            color: #7a3e00;
            background: #fff8ef;
            padding: 5px 10px;
            border-radius: 8px;
            border: 1px solid #ffd8b4;
        }

        .item-total {
            font-weight: bold;
            color: #7a3e00;
            font-size: 1.2rem;
            text-align: center;
            padding: 0 15px;
        }

        /* ORDER SUMMARY */
        .order-summary {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .summary-title {
            color: #7a3e00;
            font-size: 1.5rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            color: #555;
            padding: 8px 0;
        }

        .summary-row.total {
            font-size: 1.3rem;
            font-weight: bold;
            color: #7a3e00;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #eee;
        }

        .checkout-btn {
            width: 100%;
            padding: 15px;
            background: #ff7a00;
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            margin-top: 20px;
        }

        .checkout-btn:hover {
            background: #ff9a2a;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 122, 0, 0.3);
        }

        /* MODAL EDIT MENU (GANTI MENU) */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            display: none;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: white;
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }

        .modal-header h3 {
            color: #7a3e00;
            font-size: 1.5rem;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #666;
            cursor: pointer;
            padding: 5px;
        }

        .close-modal:hover {
            color: #ff4444;
        }

        .modal-content {
            margin-bottom: 25px;
        }

        .modal-item {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f9f9f9;
            border-radius: 10px;
        }

        .modal-item img {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
        }

        .modal-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .modal-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 30px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }

        .modal-cancel {
            background: #f5f5f5;
            color: #666;
        }

        .modal-cancel:hover {
            background: #e0e0e0;
        }

        .modal-save {
            background: #4CAF50;
            color: white;
        }

        .modal-save:hover {
            background: #45a049;
        }

        /* MODAL TAMBAH MENU */
        .add-menu-modal {
            max-width: 800px;
            max-height: 80vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .edit-menu-modal {
            max-width: 800px;
            max-height: 80vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .modal-body {
            flex: 1;
            overflow-y: auto;
            padding-right: 10px;
        }

        .menu-search {
            margin-bottom: 20px;
        }

        .menu-search input {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid #ddd;
            border-radius: 30px;
            font-size: 16px;
            outline: none;
            transition: 0.3s;
        }

        .menu-search input:focus {
            border-color: #ff7a00;
        }

        .menu-categories {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .category-btn {
            padding: 8px 20px;
            border: 2px solid #ddd;
            background: white;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
            transition: 0.3s;
        }

        .category-btn.active {
            background: #ff7a00;
            color: white;
            border-color: #ff7a00;
        }

        .category-btn:hover:not(.active) {
            border-color: #ff7a00;
            color: #ff7a00;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .menu-card {
            background: #f9f9f9;
            border-radius: 15px;
            overflow: hidden;
            transition: 0.3s;
            border: 2px solid transparent;
            cursor: pointer;
        }

        .menu-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .menu-card.selected {
            border-color: #4CAF50;
            background: #f0f9f0;
        }

        .menu-card img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }

        .menu-card-info {
            padding: 15px;
        }

        .menu-card-info h4 {
            margin: 0 0 8px 0;
            font-size: 16px;
            color: #333;
        }

        .menu-card-info .price {
            color: #ff7a00;
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .add-to-cart-btn {
            width: 100%;
            padding: 8px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }

        .add-to-cart-btn:hover {
            background: #45a049;
        }

        .selected-menu {
            background: #f0f9f0;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            border: 2px solid #4CAF50;
        }

        .selected-menu h4 {
            margin: 0 0 10px 0;
            color: #7a3e00;
        }

        .selected-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            background: white;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .selected-item:last-child {
            margin-bottom: 0;
        }

        .selected-item-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .selected-item-info img {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            object-fit: cover;
        }

        .selected-item-qty {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .selected-item-qty button {
            width: 30px;
            height: 30px;
            border: none;
            border-radius: 50%;
            background: #4CAF50;
            color: white;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .selected-item-qty span {
            min-width: 35px;
            text-align: center;
            font-weight: bold;
            font-size: 1.1rem;
            background: #f0f9f0;
            padding: 5px;
            border-radius: 5px;
        }

        /* CURRENT ITEMS SECTION UNTUK EDIT MENU */
        .current-items {
            background: #fff8e1;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            border: 2px solid #ff7a00;
        }

        .current-items h4 {
            margin: 0 0 10px 0;
            color: #7a3e00;
        }

        .current-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            background: white;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .current-item:last-child {
            margin-bottom: 0;
        }

        .current-item-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .current-item-info img {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            object-fit: cover;
        }

        .current-item-qty {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .current-item-qty span {
            min-width: 30px;
            text-align: center;
            font-weight: bold;
            color: #ff7a00;
            font-size: 1.1rem;
        }

        /* EMPTY CART */
        .empty-cart {
            text-align: center;
            padding: 60px 20px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .empty-cart i {
            font-size: 4rem;
            color: #ff7a00;
            margin-bottom: 20px;
        }

        .empty-cart h3 {
            color: #7a3e00;
            margin-bottom: 15px;
        }

        .empty-cart p {
            color: #666;
            margin-bottom: 30px;
        }

        .continue-shopping {
            display: inline-block;
            padding: 12px 30px;
            background: #ff7a00;
            color: white;
            text-decoration: none;
            border-radius: 30px;
            font-weight: bold;
            transition: 0.3s;
        }

        .continue-shopping:hover {
            background: #ff9a2a;
            transform: scale(1.05);
        }

        /* FOOTER */
        .footer {
            background: #222;
            color: #eee;
            padding: 20px;
            margin-top: 50px;
        }

        .footer-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: auto;
        }

        .footer-column h3,
        .footer-column h4 {
            color: #ff7a00;
            margin-bottom: 12px;
        }

        .footer-bottom {
            margin-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.15);
            padding-top: 20px;
            text-align: center;
            font-size: 0.85rem;
            opacity: 0.8;
        }

        /* RESPONSIVE */
        @media (max-width: 992px) {
            .cart-container {
                grid-template-columns: 1fr;
            }
            
            .cart-header, .cart-item {
                grid-template-columns: 0.5fr 2fr 1.2fr 1.3fr 0.8fr;
            }
            
            .action-toolbar {
                flex-direction: column;
                align-items: stretch;
            }
            
            .action-buttons {
                justify-content: center;
                flex-wrap: wrap;
            }

            .menu-grid {
                grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .cart-header {
                display: none;
            }
            
            .cart-item {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 25px 0;
                border-bottom: 2px solid #eee;
                text-align: center;
            }
            
            .item-checkbox {
                order: 1;
                justify-content: flex-start;
                padding-left: 10px;
            }
            
            .item-info {
                order: 2;
                flex-direction: column;
                text-align: center;
                padding-left: 0;
            }
            
            .item-img {
                width: 120px;
                height: 120px;
            }
            
            .item-price {
                order: 3;
                font-size: 1.3rem;
                padding: 5px 0;
            }
            
            .qty-control {
                order: 4;
                justify-content: center;
                gap: 20px;
            }
            
            .item-total {
                order: 5;
                text-align: center;
                font-size: 1.4rem;
                padding: 5px 0;
            }
            
            .action-btn {
                padding: 8px 20px;
                font-size: 13px;
            }
            
            nav {
                padding: 15px 20px;
            }
            
            .page-title {
                font-size: 2rem;
            }

            .menu-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }

            .add-menu-modal,
            .edit-menu-modal {
                max-width: 95%;
                max-height: 90vh;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 15px;
            }
            
            .cart-items, .order-summary {
                padding: 20px;
            }
            
            .checkout-btn {
                padding: 12px;
            }
            
            .modal {
                padding: 20px;
            }

            .menu-grid {
                grid-template-columns: 1fr;
            }

            .category-btn {
                padding: 6px 15px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <!-- NAVBAR -->
    <nav>
        <div class="logo-area">
            <img src="Produk/Img/logo/logo.png" alt="Logo" class="logo">
            <span class="brand-text">Serba Serbi Nasi<br>Bu Henny</span>
        </div>
        
        <a href="menu.html" class="back-btn">
            <i class="fas fa-arrow-left"></i> Kembali ke Menu
        </a>
    </nav>

    <!-- NOTIFICATION OVERLAY -->
    <div class="notification-overlay" id="notificationOverlay">
        <div class="notification" id="notification">
            <div class="notification-icon">
                <i class="fas fa-info-circle"></i>
            </div>
            <h3 id="notificationTitle">Notification</h3>
            <p id="notificationMessage">This is a notification message.</p>
            <div class="notification-buttons" id="notificationButtons">
                <!-- Buttons will be added dynamically -->
            </div>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <div class="container">
        <!-- HEADER DENGAN JUDUL YANG TETAP DI ATAS -->
        <div class="page-header">
            <h1 class="page-title">Keranjang Pesanan</h1>
            
            <!-- ACTION TOOLBAR - SEKARANG DIBAWAH JUDUL -->
            <div class="action-toolbar" id="actionToolbar">
                <div class="select-all">
                    <input type="checkbox" id="selectAll" onchange="toggleSelectAll(this)">
                    <label for="selectAll">Pilih Semua</label>
                </div>
                <div class="action-buttons">
                    <button class="action-btn edit-btn" onclick="openEditMenuModal()">
                        <i class="fas fa-exchange-alt"></i> Ganti Menu
                    </button>
                    <button class="action-btn delete-btn" onclick="showDeleteConfirmation()">
                        <i class="fas fa-trash"></i> Hapus
                    </button>
                    <button class="action-btn add-btn" onclick="openAddMenuModal()">
                        <i class="fas fa-plus"></i> Tambah Menu
                    </button>
                </div>
            </div>
        </div>
        
        <div id="cartContent">
            <!-- Cart items will be loaded here by JavaScript -->
        </div>
    </div>

    <!-- MODAL EDIT MENU (GANTI MENU) -->
    <div class="modal-overlay" id="editMenuModal">
        <div class="modal edit-menu-modal">
            <div class="modal-header">
                <h3>Ganti Menu yang Dipilih</h3>
                <button class="close-modal" onclick="closeEditMenuModal()">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Current selected items section -->
                <div class="current-items" id="currentItemsSection">
                    <h4>Menu yang akan diganti:</h4>
                    <div id="currentItemsList">
                        <!-- Current selected items will be listed here -->
                    </div>
                </div>
                
                <div class="menu-search">
                    <input type="text" id="editMenuSearch" placeholder="Cari menu pengganti..." onkeyup="filterEditMenu()">
                </div>
                
                <div class="menu-categories">
                    <button class="category-btn active" onclick="filterEditByCategory('all')">Semua</button>
                    <button class="category-btn" onclick="filterEditByCategory('utama')">Hidangan Utama</button>
                    <button class="category-btn" onclick="filterEditByCategory('paket')">Menu Paket</button>
                    <button class="category-btn" onclick="filterEditByCategory('minuman')">Minuman</button>
                    <button class="category-btn" onclick="filterEditByCategory('camilan')">Cemilan</button>
                </div>
                
                <div class="menu-grid" id="editMenuGrid">
                    <!-- Menu items for replacement will be loaded here -->
                </div>
                
                <div class="selected-menu" id="replacementMenuSection" style="display: none;">
                    <h4>Menu pengganti:</h4>
                    <div id="replacementMenuList">
                        <!-- Selected replacement items will be listed here -->
                    </div>
                </div>
            </div>
            <div class="modal-controls">
                <button type="button" class="modal-btn modal-cancel" onclick="closeEditMenuModal()">Batal</button>
                <button type="button" class="modal-btn modal-save" onclick="replaceSelectedItems()">Ganti Menu</button>
            </div>
        </div>
    </div>

    <!-- MODAL TAMBAH MENU -->
    <div class="modal-overlay" id="addMenuModal">
        <div class="modal add-menu-modal">
            <div class="modal-header">
                <h3>Pilih Menu dari Daftar</h3>
                <button class="close-modal" onclick="closeAddMenuModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="menu-search">
                    <input type="text" id="menuSearch" placeholder="Cari menu..." onkeyup="filterMenu()">
                </div>
                
                <div class="menu-categories">
                    <button class="category-btn active" onclick="filterByCategory('all')">Semua</button>
                    <button class="category-btn" onclick="filterByCategory('utama')">Hidangan Utama</button>
                    <button class="category-btn" onclick="filterByCategory('paket')">Menu Paket</button>
                    <button class="category-btn" onclick="filterByCategory('minuman')">Minuman</button>
                    <button class="category-btn" onclick="filterByCategory('camilan')">Cemilan</button>
                </div>
                
                <div class="menu-grid" id="menuGrid">
                    <!-- Menu items will be loaded here -->
                </div>
                
                <div class="selected-menu" id="selectedMenuSection" style="display: none;">
                    <h4>Menu yang akan ditambahkan:</h4>
                    <div id="selectedMenuList">
                        <!-- Selected items will be listed here -->
                    </div>
                </div>
            </div>
            <div class="modal-controls">
                <button type="button" class="modal-btn modal-cancel" onclick="closeAddMenuModal()">Batal</button>
                <button type="button" class="modal-btn modal-save" onclick="addSelectedToCart()">Tambahkan ke Keranjang</button>
            </div>
        </div>
    </div>

    <!-- FOOTER -->
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-column">
                <h3 class="footer-brand">Serba Serbi Nasi Bu Henny</h3>
                <p>Cita rasa rumahan yang selalu dirindukan.</p>
            </div>

            <div class="footer-column">
                <h4>Hubungi Kami</h4>
                <p>üìû +62 8572 0261 642</p>
                <p>‚úâÔ∏è serbaserbi@gmail.com</p>
            </div>

            <div class="footer-column">
                <h4>Lokasi</h4>
                <p>üìç Jl.Pasirgede Raya,Cianjur</p>
            </div>

            <div class="footer-column">
                <h4>Jam Operasional</h4>
                <p>Senin - Jumat<br>07:00 ‚Äì 20:00 WIB</p>
                <br>
                <p>Sabtu - Minggu<br>07:00 ‚Äì 21:00 WIB</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>¬© 2025 Serba Serbi Nasi Bu Henny ‚Äî Semua Hak Dilindungi</p>
        </div>
    </footer>

    <script>
        // Data menu dari halaman menu (sama dengan data di menu.html)
        const menuData = {
            "Ikan Bakar": { 
                img: "Produk/Img/hidangan/makanan1.jpeg", 
                price: 28000,
                category: "utama"
            },
            "Perkedel": { 
                img: "Produk/Img/hidangan/makanan2.jpeg", 
                price: 5000,
                category: "utama"
            },
            "Cumi Bakar": { 
                img: "Produk/Img/hidangan/makanan3.jpeg", 
                price: 32000,
                category: "utama"
            },
            "Ayam Goreng Serundeng": { 
                img: "Produk/Img/hidangan/makanan4.jpeg", 
                price: 22000,
                category: "utama"
            },
            "Sop Iga": { 
                img: "Produk/Img/hidangan/makanan5.jpeg", 
                price: 38000,
                category: "utama"
            },
            "Sambal Joss": { 
                img: "Produk/Img/hidangan/makanan6.jpeg", 
                price: 4000,
                category: "utama"
            },
            "Ayam Goreng": { 
                img: "Produk/Img/hidangan/makanan7.jpeg", 
                price: 20000,
                category: "utama"
            },
            "Sop Ayam": { 
                img: "Produk/Img/hidangan/makanan8.jpeg", 
                price: 18000,
                category: "utama"
            },
            "Gule Sapi": { 
                img: "Produk/Img/hidangan/makanan9.jpeg", 
                price: 35000,
                category: "utama"
            },
            "Nasi Goreng": { 
                img: "Produk/Img/hidangan/makanan10.jpeg", 
                price: 15000,
                category: "utama"
            },
            "Nasi Biasa": { 
                img: "Produk/Img/hidangan/makanan11.jpeg", 
                price: 6000,
                category: "utama"
            },
            "Nasi Kuning": { 
                img: "Produk/Img/hidangan/makanan12.jpeg", 
                price: 100000,
                category: "utama"
            },
            "Paket 1": { 
                img: "Produk/Img/paket/paket1.jpeg", 
                price: 180000,
                category: "paket"
            },
            "Paket 2": { 
                img: "Produk/Img/paket/paket2.jpeg", 
                price: 200000,
                category: "paket"
            },
            "Paket 3": { 
                img: "Produk/Img/paket/paket3.jpeg", 
                price: 220000,
                category: "paket"
            },
            "Paket 4": { 
                img: "Produk/Img/paket/paket4.jpeg", 
                price: 240000,
                category: "paket"
            },
            "Paket 5": { 
                img: "Produk/Img/paket/paket5.jpeg", 
                price: 107000,
                category: "paket"
            },
            "Paket 6": { 
                img: "Produk/Img/paket/paket6.jpeg", 
                price: 280000,
                category: "paket"
            },
            "Cappuccino": { 
                img: "Produk/Img/minuman/minuman1.jpeg", 
                price: 14000,
                category: "minuman"
            },
            "Es Cendol": { 
                img: "Produk/Img/minuman/minuman2.jpeg", 
                price: 8000,
                category: "minuman"
            },
            "Es Teh Manis": { 
                img: "Produk/Img/minuman/minuman3.jpeg", 
                price: 14000,
                category: "minuman"
            },
            "Brown Sugar": { 
                img: "Produk/Img/minuman/minuman4.jpeg", 
                price: 5000,
                category: "minuman"
            },
            "Kopi Hitam": { 
                img: "Produk/Img/minuman/minuman5.jpeg", 
                price: 7000,
                category: "minuman"
            },
            "Es Jeruk Peras": { 
                img: "Produk/Img/minuman/minuman6.jpeg", 
                price: 8000,
                category: "minuman"
            },
            "Dimsum": { 
                img: "Produk/Img/cemilan/cemilan1.jpeg", 
                price: 12000,
                category: "camilan"
            },
            "Cireng": { 
                img: "Produk/Img/cemilan/cemilan2.jpeg", 
                price: 6000,
                category: "camilan"
            },
            "Pisang Keju": { 
                img: "Produk/Img/cemilan/cemilan3.jpeg", 
                price: 12000,
                category: "camilan"
            },
            "Nugget Goreng": { 
                img: "Produk/Img/cemilan/cemilan4.jpeg", 
                price: 10000,
                category: "camilan"
            },
            "Tahu Crispy": { 
                img: "Produk/Img/cemilan/cemilan5.jpeg", 
                price: 6000,
                category: "camilan"
            },
            "Onde-Onde": { 
                img: "Produk/Img/cemilan/cemilan6.jpeg", 
                price: 5000,
                category: "camilan"
            }
        };

        // Get cart from localStorage
        let cart = JSON.parse(localStorage.getItem('cart')) || {};
        let selectedItems = new Set(); // Set untuk menyimpan item yang terpilih
        
        // Untuk modal tambah menu
        let selectedMenuItems = {}; 
        let currentCategory = 'all';
        let searchQuery = '';
        
        // Untuk modal edit menu (ganti menu)
        let editCategory = 'all';
        let editSearchQuery = '';
        let replacementItems = {}; // Menu pengganti yang dipilih
        let itemsToReplace = {}; // Menu yang akan diganti

        // NOTIFICATION FUNCTIONS
        function showNotification(title, message, type = 'info', options = {}) {
            const overlay = document.getElementById('notificationOverlay');
            const notification = document.getElementById('notification');
            const titleEl = document.getElementById('notificationTitle');
            const messageEl = document.getElementById('notificationMessage');
            const buttonsEl = document.getElementById('notificationButtons');
            
            // Set notification type
            notification.className = 'notification ' + type;
            
            // Set icon based on type
            const iconEl = notification.querySelector('.notification-icon i');
            switch(type) {
                case 'success':
                    iconEl.className = 'fas fa-check-circle';
                    break;
                case 'warning':
                    iconEl.className = 'fas fa-exclamation-triangle';
                    break;
                case 'error':
                    iconEl.className = 'fas fa-exclamation-circle';
                    break;
                default:
                    iconEl.className = 'fas fa-info-circle';
            }
            
            // Set content
            titleEl.textContent = title;
            messageEl.textContent = message;
            
            // Clear existing buttons
            buttonsEl.innerHTML = '';
            
            // Add buttons based on options
            if (options.confirm) {
                // Confirmation dialog with OK and Cancel
                buttonsEl.innerHTML = `
                    <button class="notification-btn cancel" onclick="hideNotification()">Batal</button>
                    <button class="notification-btn confirm" onclick="${options.onConfirm}">OK</button>
                `;
            } else {
                // Simple notification with OK button
                buttonsEl.innerHTML = `<button class="notification-btn ok" onclick="hideNotification()">OK</button>`;
            }
            
            // Show notification
            overlay.classList.add('active');
            
            // Auto-hide if specified
            if (options.autoHide) {
                setTimeout(() => {
                    hideNotification();
                    if (options.onClose) {
                        options.onClose();
                    }
                }, options.duration || 3000);
            }
        }
        
        function hideNotification() {
            document.getElementById('notificationOverlay').classList.remove('active');
        }
        
        // Format currency
        function formatCurrency(amount) {
            return 'Rp ' + amount.toLocaleString('id-ID');
        }

        // Toggle selection of an item
        function toggleSelection(itemName, checkbox) {
            if (checkbox.checked) {
                selectedItems.add(itemName);
                document.querySelector(`.cart-item[data-item="${itemName}"]`).classList.add('selected');
            } else {
                selectedItems.delete(itemName);
                document.querySelector(`.cart-item[data-item="${itemName}"]`).classList.remove('selected');
                document.getElementById('selectAll').checked = false;
            }
            
            updateActionToolbar();
        }

        // Toggle select all
        function toggleSelectAll(checkbox) {
            const allCheckboxes = document.querySelectorAll('.item-checkbox input[type="checkbox"]');
            const cartItems = document.querySelectorAll('.cart-item');
            
            if (checkbox.checked) {
                selectedItems.clear();
                allCheckboxes.forEach((cb, index) => {
                    cb.checked = true;
                    const itemName = cartItems[index].dataset.item;
                    selectedItems.add(itemName);
                    cartItems[index].classList.add('selected');
                });
            } else {
                selectedItems.clear();
                allCheckboxes.forEach((cb, index) => {
                    cb.checked = false;
                    cartItems[index].classList.remove('selected');
                });
            }
            
            updateActionToolbar();
        }

        // Update action toolbar visibility
        function updateActionToolbar() {
            const actionToolbar = document.getElementById('actionToolbar');
            if (selectedItems.size > 0) {
                actionToolbar.style.display = 'flex';
            } else {
                actionToolbar.style.display = 'none';
                document.getElementById('selectAll').checked = false;
            }
        }

        // Update cart display
        function updateCartDisplay() {
            const cartContent = document.getElementById('cartContent');
            const cartItems = Object.entries(cart);
            
            if (cartItems.length === 0) {
                cartContent.innerHTML = `
                    <div class="empty-cart">
                        <i class="fas fa-shopping-cart"></i>
                        <h3>Keranjang Kosong</h3>
                        <p>Belum ada item dalam keranjang Anda. Yuk, pesan makanan lezat!</p>
                        <a href="menu.html" class="continue-shopping">Lihat Menu</a>
                    </div>
                `;
                document.getElementById('actionToolbar').style.display = 'none';
                return;
            }

            let totalItems = 0;
            let subtotal = 0;
            let html = '';

            // Cart items section
            html += '<div class="cart-container">';
            html += '<div class="cart-items">';
            html += '<div class="cart-header">';
            html += '<div></div>';
            html += '<div>Item</div>';
            html += '<div>Harga</div>';
            html += '<div>Jumlah</div>';
            html += '<div>Total</div>';
            html += '</div>';

            cartItems.forEach(([itemName, quantity]) => {
                if (quantity > 0 && menuData[itemName]) {
                    const item = menuData[itemName];
                    const itemTotal = item.price * quantity;
                    const isSelected = selectedItems.has(itemName);
                    
                    totalItems += quantity;
                    subtotal += itemTotal;

                    html += `
                        <div class="cart-item ${isSelected ? 'selected' : ''}" data-item="${itemName}">
                            <div class="item-checkbox">
                                <input type="checkbox" 
                                       ${isSelected ? 'checked' : ''}
                                       onchange="toggleSelection('${itemName}', this)">
                            </div>
                            <div class="item-info">
                                <img src="${item.img}" alt="${itemName}" class="item-img">
                                <div class="item-details">
                                    <h4>${itemName}</h4>
                                    <div class="price">${formatCurrency(item.price)}</div>
                                </div>
                            </div>
                            <div class="item-price">${formatCurrency(item.price)}</div>
                            <div class="qty-control">
                                <button class="minus" onclick="updateQuantity('${itemName}', -1)">‚àí</button>
                                <span class="qty">${quantity}</span>
                                <button class="plus" onclick="updateQuantity('${itemName}', 1)">+</button>
                            </div>
                            <div class="item-total">${formatCurrency(itemTotal)}</div>
                        </div>
                    `;
                }
            });

            html += '</div>'; // Close cart-items

            // Order summary
            const serviceFee = 5000;
            const tax = subtotal * 0.1;
            const total = subtotal + serviceFee + tax;

            html += `
                <div class="order-summary">
                    <h3 class="summary-title">Ringkasan Pesanan</h3>
                    <div class="summary-row">
                        <span>Subtotal (${totalItems} items)</span>
                        <span>${formatCurrency(subtotal)}</span>
                    </div>
                    <div class="summary-row">
                        <span>Biaya Layanan</span>
                        <span>${formatCurrency(serviceFee)}</span>
                    </div>
                    <div class="summary-row">
                        <span>Pajak (10%)</span>
                        <span>${formatCurrency(tax)}</span>
                    </div>
                    <div class="summary-row total">
                        <span>Total Pembayaran</span>
                        <span>${formatCurrency(total)}</span>
                    </div>
                    <button class="checkout-btn" onclick="showCheckoutNotification()">
                        <i class="fas fa-credit-card"></i> Lanjutkan ke Pembayaran
                    </button>
                    <p style="text-align: center; margin-top: 15px; font-size: 0.9rem; color: #666;">
                        *Pesanan akan diproses setelah pembayaran
                    </p>
                </div>
            `;

            html += '</div>'; // Close cart-container
            cartContent.innerHTML = html;
        }

        // Update quantity function
        function updateQuantity(itemName, change) {
            if (!cart[itemName]) cart[itemName] = 0;
            cart[itemName] += change;
            
            if (cart[itemName] <= 0) {
                delete cart[itemName];
                selectedItems.delete(itemName);
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartDisplay();
        }

        // Open edit menu modal (GANTI MENU)
        function openEditMenuModal() {
            if (selectedItems.size === 0) {
                showNotification(
                    'Peringatan', 
                    'Pilih menu terlebih dahulu yang ingin diganti!', 
                    'warning'
                );
                return;
            }
            
            // Reset replacement items
            replacementItems = {};
            
            // Collect items to replace
            itemsToReplace = {};
            selectedItems.forEach(itemName => {
                if (cart[itemName]) {
                    itemsToReplace[itemName] = cart[itemName];
                }
            });
            
            // Tampilkan modal
            document.getElementById('editMenuModal').classList.add('active');
            
            // Update current items section
            updateCurrentItemsSection();
            
            // Load replacement menu items
            loadEditMenuItems();
            
            // Update replacement menu section
            updateReplacementMenuSection();
        }

        // Close edit menu modal
        function closeEditMenuModal() {
            document.getElementById('editMenuModal').classList.remove('active');
            // Reset search
            document.getElementById('editMenuSearch').value = '';
            editSearchQuery = '';
            editCategory = 'all';
            
            // Update category buttons
            document.querySelectorAll('#editMenuModal .category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector('#editMenuModal .category-btn:first-child').classList.add('active');
        }

        // Update current items section
        function updateCurrentItemsSection() {
            const currentItemsList = document.getElementById('currentItemsList');
            let html = '';
            
            Object.entries(itemsToReplace).forEach(([name, qty]) => {
                const item = menuData[name];
                html += `
                    <div class="current-item">
                        <div class="current-item-info">
                            <img src="${item.img}" alt="${name}">
                            <div>
                                <div style="font-weight: bold;">${name}</div>
                                <div style="color: #ff7a00; font-size: 12px;">${formatCurrency(item.price)}</div>
                            </div>
                        </div>
                        <div class="current-item-qty">
                            <span>${qty} item</span>
                        </div>
                    </div>
                `;
            });
            
            currentItemsList.innerHTML = html;
        }

        // Load menu items for replacement
        function loadEditMenuItems() {
            const editMenuGrid = document.getElementById('editMenuGrid');
            let html = '';
            
            const entries = Object.entries(menuData);
            
            entries.forEach(([name, item]) => {
                // Filter berdasarkan kategori dan pencarian
                const matchesCategory = editCategory === 'all' || item.category === editCategory;
                const matchesSearch = editSearchQuery === '' || 
                    name.toLowerCase().includes(editSearchQuery.toLowerCase());
                
                // Jangan tampilkan item yang sudah dipilih untuk diganti
                const isBeingReplaced = itemsToReplace.hasOwnProperty(name);
                
                if (matchesCategory && matchesSearch && !isBeingReplaced) {
                    const isSelected = replacementItems.hasOwnProperty(name);
                    html += `
                        <div class="menu-card ${isSelected ? 'selected' : ''}" onclick="toggleReplacementSelection('${name}')">
                            <img src="${item.img}" alt="${name}">
                            <div class="menu-card-info">
                                <h4>${name}</h4>
                                <div class="price">${formatCurrency(item.price)}</div>
                                <button class="add-to-cart-btn" onclick="event.stopPropagation(); addReplacementMenu('${name}')">
                                    ${isSelected ? '<i class="fas fa-check"></i> Terpilih' : '<i class="fas fa-exchange-alt"></i> Ganti'}
                                </button>
                            </div>
                        </div>
                    `;
                }
            });
            
            if (html === '') {
                html = '<p style="text-align: center; color: #666; grid-column: 1 / -1;">Tidak ada menu yang ditemukan.</p>';
            }
            
            editMenuGrid.innerHTML = html;
        }

        // Filter edit menu by search
        function filterEditMenu() {
            editSearchQuery = document.getElementById('editMenuSearch').value;
            loadEditMenuItems();
        }

        // Filter edit menu by category
        function filterEditByCategory(category) {
            editCategory = category;
            
            // Update active button
            const categoryButtons = document.querySelectorAll('#editMenuModal .category-btn');
            categoryButtons.forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            loadEditMenuItems();
        }

        // Toggle replacement menu selection
        function toggleReplacementSelection(itemName) {
            if (replacementItems[itemName]) {
                delete replacementItems[itemName];
            } else {
                replacementItems[itemName] = 1; // Default quantity 1
            }
            
            loadEditMenuItems();
            updateReplacementMenuSection();
        }

        // Add replacement menu
        function addReplacementMenu(itemName) {
            if (!replacementItems[itemName]) {
                replacementItems[itemName] = 1;
            }
            
            loadEditMenuItems();
            updateReplacementMenuSection();
        }

        // Update replacement menu quantity
        function updateReplacementQty(itemName, change) {
            if (replacementItems[itemName]) {
                replacementItems[itemName] += change;
                if (replacementItems[itemName] <= 0) {
                    delete replacementItems[itemName];
                }
                updateReplacementMenuSection();
                loadEditMenuItems(); // Refresh untuk update tombol
            }
        }

        // Update replacement menu section
        function updateReplacementMenuSection() {
            const replacementMenuSection = document.getElementById('replacementMenuSection');
            const replacementMenuList = document.getElementById('replacementMenuList');
            
            const selectedCount = Object.keys(replacementItems).length;
            
            if (selectedCount > 0) {
                replacementMenuSection.style.display = 'block';
                
                let html = '';
                Object.entries(replacementItems).forEach(([name, qty]) => {
                    const item = menuData[name];
                    html += `
                        <div class="selected-item">
                            <div class="selected-item-info">
                                <img src="${item.img}" alt="${name}">
                                <div>
                                    <div style="font-weight: bold;">${name}</div>
                                    <div style="color: #ff7a00; font-size: 12px;">${formatCurrency(item.price)}</div>
                                </div>
                            </div>
                            <div class="selected-item-qty">
                                <button onclick="updateReplacementQty('${name}', -1)">-</button>
                                <span>${qty}</span>
                                <button onclick="updateReplacementQty('${name}', 1)">+</button>
                            </div>
                        </div>
                    `;
                });
                
                replacementMenuList.innerHTML = html;
            } else {
                replacementMenuSection.style.display = 'none';
            }
        }

        // Replace selected items with new items
        function replaceSelectedItems() {
            const replacementCount = Object.keys(replacementItems).length;
            const itemsToReplaceCount = Object.keys(itemsToReplace).length;
            
            if (replacementCount === 0) {
                showNotification(
                    'Peringatan',
                    'Pilih menu pengganti terlebih dahulu!',
                    'warning'
                );
                return;
            }
            
            if (replacementCount > itemsToReplaceCount) {
                showNotification(
                    'Konfirmasi',
                    `Anda memilih ${replacementCount} menu pengganti untuk ${itemsToReplaceCount} menu yang akan diganti. Menu tambahan akan ditambahkan ke keranjang. Lanjutkan?`,
                    'warning',
                    {
                        confirm: true,
                        onConfirm: 'confirmReplaceItems()'
                    }
                );
                return;
            }
            
            confirmReplaceItems();
        }

        function confirmReplaceItems() {
            // Hapus menu lama dari keranjang
            Object.keys(itemsToReplace).forEach(itemName => {
                delete cart[itemName];
                selectedItems.delete(itemName);
            });
            
            // Tambahkan menu baru ke keranjang
            Object.entries(replacementItems).forEach(([name, qty]) => {
                if (cart[name]) {
                    cart[name] += qty;
                } else {
                    cart[name] = qty;
                }
            });
            
            // Save to localStorage
            localStorage.setItem('cart', JSON.stringify(cart));
            
            // Close modal and refresh display
            closeEditMenuModal();
            updateCartDisplay();
            
            showNotification(
                'Berhasil',
                `${Object.keys(itemsToReplace).length} menu berhasil diganti dengan ${Object.keys(replacementItems).length} menu baru!`,
                'success',
                {
                    autoHide: true,
                    duration: 3000
                }
            );
        }

        // Open add menu modal
        function openAddMenuModal() {
            // Reset selected menu items
            selectedMenuItems = {};
            
            // Tampilkan modal
            document.getElementById('addMenuModal').classList.add('active');
            
            // Load menu items
            loadMenuItems();
            
            // Update selected menu section
            updateSelectedMenuSection();
        }

        // Close add menu modal
        function closeAddMenuModal() {
            document.getElementById('addMenuModal').classList.remove('active');
            // Reset search
            document.getElementById('menuSearch').value = '';
            searchQuery = '';
            currentCategory = 'all';
            
            // Update category buttons
            document.querySelectorAll('#addMenuModal .category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector('#addMenuModal .category-btn:first-child').classList.add('active');
        }

        // Load menu items for modal
        function loadMenuItems() {
            const menuGrid = document.getElementById('menuGrid');
            let html = '';
            
            const entries = Object.entries(menuData);
            
            entries.forEach(([name, item]) => {
                // Filter berdasarkan kategori dan pencarian
                const matchesCategory = currentCategory === 'all' || item.category === currentCategory;
                const matchesSearch = searchQuery === '' || 
                    name.toLowerCase().includes(searchQuery.toLowerCase());
                
                if (matchesCategory && matchesSearch) {
                    const isSelected = selectedMenuItems.hasOwnProperty(name);
                    html += `
                        <div class="menu-card ${isSelected ? 'selected' : ''}" onclick="toggleMenuSelection('${name}')">
                            <img src="${item.img}" alt="${name}">
                            <div class="menu-card-info">
                                <h4>${name}</h4>
                                <div class="price">${formatCurrency(item.price)}</div>
                                <button class="add-to-cart-btn" onclick="event.stopPropagation(); addMenuToSelection('${name}')">
                                    ${isSelected ? '<i class="fas fa-check"></i> Terpilih' : '<i class="fas fa-plus"></i> Pilih'}
                                </button>
                            </div>
                        </div>
                    `;
                }
            });
            
            if (html === '') {
                html = '<p style="text-align: center; color: #666; grid-column: 1 / -1;">Tidak ada menu yang ditemukan.</p>';
            }
            
            menuGrid.innerHTML = html;
        }

        // Filter menu by search
        function filterMenu() {
            searchQuery = document.getElementById('menuSearch').value;
            loadMenuItems();
        }

        // Filter menu by category
        function filterByCategory(category) {
            currentCategory = category;
            
            // Update active button
            document.querySelectorAll('#addMenuModal .category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            loadMenuItems();
        }

        // Toggle menu selection
        function toggleMenuSelection(itemName) {
            if (selectedMenuItems[itemName]) {
                delete selectedMenuItems[itemName];
            } else {
                selectedMenuItems[itemName] = 1; // Default quantity 1
            }
            
            loadMenuItems();
            updateSelectedMenuSection();
        }

        // Add menu to selection
        function addMenuToSelection(itemName) {
            if (!selectedMenuItems[itemName]) {
                selectedMenuItems[itemName] = 1;
            }
            
            loadMenuItems();
            updateSelectedMenuSection();
        }

        // Update selected menu quantity
        function updateSelectedMenuQty(itemName, change) {
            if (selectedMenuItems[itemName]) {
                selectedMenuItems[itemName] += change;
                if (selectedMenuItems[itemName] <= 0) {
                    delete selectedMenuItems[itemName];
                }
                updateSelectedMenuSection();
                loadMenuItems(); // Refresh untuk update tombol
            }
        }

        // Update selected menu section
        function updateSelectedMenuSection() {
            const selectedMenuSection = document.getElementById('selectedMenuSection');
            const selectedMenuList = document.getElementById('selectedMenuList');
            
            const selectedCount = Object.keys(selectedMenuItems).length;
            
            if (selectedCount > 0) {
                selectedMenuSection.style.display = 'block';
                
                let html = '';
                Object.entries(selectedMenuItems).forEach(([name, qty]) => {
                    const item = menuData[name];
                    html += `
                        <div class="selected-item">
                            <div class="selected-item-info">
                                <img src="${item.img}" alt="${name}">
                                <div>
                                    <div style="font-weight: bold;">${name}</div>
                                    <div style="color: #ff7a00; font-size: 12px;">${formatCurrency(item.price)}</div>
                                </div>
                            </div>
                            <div class="selected-item-qty">
                                <button onclick="updateSelectedMenuQty('${name}', -1)">-</button>
                                <span>${qty}</span>
                                <button onclick="updateSelectedMenuQty('${name}', 1)">+</button>
                            </div>
                        </div>
                    `;
                });
                
                selectedMenuList.innerHTML = html;
            } else {
                selectedMenuSection.style.display = 'none';
            }
        }

        // Add selected items to cart
        function addSelectedToCart() {
            const selectedCount = Object.keys(selectedMenuItems).length;
            
            if (selectedCount === 0) {
                showNotification(
                    'Peringatan',
                    'Pilih menu terlebih dahulu!',
                    'warning'
                );
                return;
            }
            
            // Add each selected item to cart
            Object.entries(selectedMenuItems).forEach(([name, qty]) => {
                if (cart[name]) {
                    cart[name] += qty;
                } else {
                    cart[name] = qty;
                }
            });
            
            // Save to localStorage
            localStorage.setItem('cart', JSON.stringify(cart));
            
            // Close modal and refresh display
            closeAddMenuModal();
            updateCartDisplay();
            
            showNotification(
                'Berhasil',
                `${selectedCount} menu berhasil ditambahkan ke keranjang!`,
                'success',
                {
                    autoHide: true,
                    duration: 3000
                }
            );
        }

        // Show delete confirmation
        function showDeleteConfirmation() {
            if (selectedItems.size === 0) {
                showNotification(
                    'Peringatan',
                    'Pilih item terlebih dahulu!',
                    'warning'
                );
                return;
            }
            
            showNotification(
                'Konfirmasi',
                `Hapus ${selectedItems.size} item yang dipilih?`,
                'warning',
                {
                    confirm: true,
                    onConfirm: 'deleteSelectedItems()'
                }
            );
        }

        // Delete selected items
        function deleteSelectedItems() {
            selectedItems.forEach(itemName => {
                delete cart[itemName];
            });
            
            selectedItems.clear();
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartDisplay();
            
            showNotification(
                'Berhasil',
                'Item berhasil dihapus dari keranjang!',
                'success',
                {
                    autoHide: true,
                    duration: 3000
                }
            );
        }

        // Show checkout notification
        function showCheckoutNotification() {
            if (Object.keys(cart).length === 0) {
                showNotification(
                    'Peringatan',
                    'Keranjang Anda masih kosong!',
                    'warning'
                );
                return;
            }
            
            const checkoutData = {
                cart: cart,
                timestamp: new Date().toISOString(),
                total: calculateTotal()
            };
            localStorage.setItem('checkout', JSON.stringify(checkoutData));
            
            showNotification(
                'Berhasil',
                'Pesanan berhasil disimpan! Arahkan ke halaman pembayaran...',
                'success',
                {
                    autoHide: true,
                    duration: 3000,
                    onClose: function() {
                        // window.location.href = 'pembayaran.html';
                    }
                }
            );
        }

        // Calculate total function
        function calculateTotal() {
            let subtotal = 0;
            Object.entries(cart).forEach(([itemName, quantity]) => {
                if (menuData[itemName]) {
                    subtotal += menuData[itemName].price * quantity;
                }
            });
            
            const serviceFee = 5000;
            const tax = subtotal * 0.1;
            return subtotal + serviceFee + tax;
        }

        // Initialize cart display
        document.addEventListener('DOMContentLoaded', updateCartDisplay);
    </script>
</body>
</html>